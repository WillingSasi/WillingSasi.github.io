---

layout:     post
title:      "面经总结-美团优选1面"
subtitle:   "测开岗位"
date:       2021-11-12 11:00:00
author:     "WS"
header-img: "img/post-bg-2015.jpg"
catalog:    true
tags:
    - 面经
    - 美团
---

###  先说总结：

  先是客户端面试官面，半截又转到服务端测试面。。。离谱。主要是服务端面试官自己说了没准备，然后中途问问题的时候好几次想笑场，他在使劲想八股文问题点，哈哈哈，整体感觉问了许多技术问题，最后没有算法代码题，估计也是没有准备，按美团的性子应该每面都有算法

### 关键问答流程：

一面：

1. Q：前端主流测试框架怎么选择？却别？问题点？

2. Q：前端页面跳转指定页面？adb activity？？

   adb shell am start 

3. Q：前端app监控？

   可以做！！！

4. Q：sandbox实现原理和方式？

   要解决`无侵入`的特性需要AOP框架具备 **在运行时完成目标方法的增强和替换**。在JDK的规范中运行期重定义一个类必须准循以下原则

   1. 不允许新增、修改和删除成员变量
   2. 不允许新增和删除方法
   3. 不允许修改方法签名

   JVM-SANDBOX属于基于Instrumentation的动态编织类的AOP框架，**通过精心构造了字节码增强逻辑，使得沙箱的模块能在不违反JDK约束情况下实现对目标应用方法的`无侵入`运行时AOP拦截**。

5. Q：sandbox原理和开发三个步骤？官方文档

   在沙箱的世界观中，任何一个Java方法的调用都可以分解为`BEFORE`、`RETURN`和`THROWS`三个环节，由此在三个环节上引申出对应环节的事件探测和流程控制机制。

6. Q：java解析excel工具类方法？

   ```xml
   <groupId>org.apache.poi</groupId>
    <artifactId>poi-ooxml</artifactId>
   ```

7. Q：springboot mybatis自动生成mapper代码？

   SpringBoot 整合 Mybatis Generator自动生成dao、entity、mapper.xml实现单表增删改查。

8. Q：后端服务接口的幂等？

   接口层，缓存层，db层

   接口幂等性就是用户对于同一操作发起的一次请求或者多次请求的结果是一致的，不会因为多次点击而产生了副作用

   常见的两种实现方案: 

   1. 通过代码逻辑判断实现  ：通过orderId来标定订单的唯一性，付款系统只要检测到订单已经支付过，则第二次调用不会扣款而会直接返回结果：
   2. 2. 使用token机制实现：生成全局唯一的token，一次有效性，可以限流

9. Q：慢sql问题？

   #$差别？

   \# 方式底层采用`预编译方式PreparedStatement`，能够很大程度`防止sql注入`；$方式`底层只是Statement`，`无法防止Sql注入`

   [sql 中 ${} 和 #{} - 寒冰射手（电脑） - 博客园 (cnblogs.com)](https://www.cnblogs.com/hpwd/p/12581710.html)

   SQL编写问题

   锁

   业务实例相互干绕对 IO/CPU 资源争用

   服务器硬件

   MYSQL BUG

10. Q：redis缓存击穿和雪崩？

    缓存雪崩是由于原有缓存失效(过期)，新缓存未到期间。所有请求都去查询数据库，而对数据库CPU和内存造成巨大压力，严重的会造成数据库宕机。从而形成一系列连锁反应，造成整个系统崩溃。

    指用户查询数据，在数据库没有，自然在缓存中也不会有。这样就导致用户查询的时候，在缓存中找不到，每次都要去数据库再查询一遍，然后返回空。这样请求就绕过缓存直接查数据库，这也是经常提的缓存命中率问题。

11. Q：redis如何设计测试？

12. Q：MQ消息队列如何设计测试？

13. Q：jacoco使用？

    ![img](https://upload-images.jianshu.io/upload_images/1295721-4ab23bcb062eb950.png?imageMogr2/auto-orient/strip|imageView2/2/w/557/format/webp)

    存在如下情况不适合 on-the-fly，需要采用 offline 提前对字节码插桩：

    1. 运行环境不支持 java agent。
    2. 部署环境不允许设置 JVM 参数。
    3. 字节码需要被转换成其他的虚拟机如 Android Dalvik VM。
    4. 动态修改字节码过程中和其他 agent 冲突。
    5. 无法自定义用户加载类。

14. Q：mockito简单使用？

    when(mockedList.get(anyInt())).thenReturn("element");

    ```java
    // Mockito支持前置定义行为
    Mockito.doThrow(RuntimeException.class).when(runnable).run();
    ```

15. Q：读写分离，主库从库，有哪些问题？

