---

layout:     post
title:      "面经总结-自如"
subtitle:   "测开岗位"
date:       2021-11-12 11:00:00
author:     "WS"
header-img: "img/post-bg-2015.jpg"
catalog:    true
tags:
    - 面经
    - 自如
---

###  先说总结：

  

### 关键问答流程：

一面：

1. Q：docker 打包命令？生成镜像命令？dockerfile？命令操作

   docker commit -a="作者名" -m="描述" 容器ID 包/名称:版本
   docker commit -a="test_author" -m="tomcat test hello" b6c1ff931ffc skey/mytomcat:1.1

   命令1 - 生成镜像 $ docker build -t my_java_scala_env:1.0 .
   命令2 - 运行镜像 $ docker run -it my_java_scala_env:1.0
   命令3 - 导出镜像 $ docker save my_java_scala_env:1.0 -o my_java_scala_env_1.0.tar
   复制到到其他服务器
   命令4 - 加载镜像 $ docker load -i my_java_scala_env_1.0.tar

   

   `docker images`查看docker镜像

   `docker search tomcat`从Docker Hub上查找tomcat镜像

   `docker pull tomcat`从Docker Hub上下载tomcat镜像

   `docker rmi hello-world`从Docker中删除hello-world镜像

   docker run [OPTIONS] IMAGE根据镜像新建并启动容器。IMAGE是镜像ID或镜像名称
   OPTIONS说明：
    --name=“容器新名字”：为容器指定一个名称
    -d：后台运行容器，并返回容器ID，也即启动守护式容器
    -i：以交互模式运行容器，通常与-t同时使用
    -t：为容器重新分配一个伪输入终端，通常与-i同时使用
    -P：随机端口映射
    -p：指定端口映射，有以下四种格式：

   `docker ps`列出当前所有正在运行的容器
   `docker ps -a`列出所有的容器

   `docker start 容器ID或容器名称`启动容器
   `docker restart 容器ID或容器名称`重新启动容器
   `docker stop容器ID或容器名称`停止容器
   `docker kill 容器ID或容器名称`强制停止容器
   `docker rm 容器ID或容器名称`删除容器

   docker logs -f -t --since --tail 容器ID或容器名称查看容器日志
   如：docker logs -f -t --since=”2018-09-10” --tail=10 f9e29e8455a5
    -f : 查看实时日志
    -t : 查看日志产生的日期
    --since : 此参数指定了输出日志开始日期，即只输出指定日期之后的日志
    --tail=10 : 查看最后的10条日志docker top 容器ID或容器名称查看容器内运行的进程
   docker inspect 容器ID或容器名称查看容器内部细节
   docker attach 容器ID进到容器内
   docker exec 容器ID进到容器内
   docker cp 容器ID:容器内的文件路径 宿主机路径从容器内拷贝文件到宿主机.

2. Q：redis和memcache？区别？

   都是内存数据库。不过memcache还可用于缓存其他东西，例如图片、视频等等

   存储数据安全--memcache挂掉后，数据没了；redis可以定期保存到磁盘（持久化）；

   [灾难恢复](https://www.baidu.com/s?wd=灾难恢复&tn=44039180_cpr&fenlei=mv6quAkxTZn0IZRqIHcvrjTdrH00T1Y4rjDYnju-njb1nycLmW-b0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHbzPHfYP10LPjDznWnkn1T3Ps)--memcache挂掉后，数据不可恢复; redis数据丢失后可以通过aof恢复；

   在Redis中，并不是所有的数据都一直存储在内存中的。这是和Memcached相比一个最大的区别（我个人是这么认为的）。

   Redis 只会缓存所有的key的信息，如果Redis发现内存的使用量超过了某一个阀值，将触发swap的操作，Redis根据“swappability = age*log(size_in_memory)”计算出哪些key对应的value需要swap到磁盘。然后再将这些key对应的value持久化到磁 盘中，同时在内存中清除。这种特性使得Redis可以保持超过其机器本身内存大小的数据。当然，机器本身的内存必须要能够保持所有的key，毕竟这些数据 是不会进行swap操作的。

3. Q：redis缓存写满了怎么办？

   在Redis 4.0之前有6种内存淘汰策略，之后又增加2种，一共8种，如下图所示

   ![image](https://static001.geekbang.org/resource/image/04/f6/04bdd13b760016ec3b30f4b02e133df6.jpg)

   - noeviction策略：内存空间达到maxmemory时，不会淘汰数据，有新写入时会返回错误。
   - volatile-ttl策略：针对设置了过期时间的键值对，根据过期时间的先后进行修改，越早过期的越先被删除。
   - volatile-random策略：在设置了过期时间的键值对中，进行随机删除。
   - volatile-lru策略：使用LRU算法筛选设置了过期时间的键值对，进行删除。
   - volatile-lfu策略：使用LFU算法筛选设置了过期时间的键值对，进行删除。
   - allkeys-random策略：在所有键值对中随机选择并删除数据。
   - allkeys-lru策略：使用LRU算法在所有数据中进行筛选并删除数据。
   - allkeys-lfu策略：使用LFU算法在所有数据中进行筛选并删除数据。

4. Q：性能测试中的指标？服务器的内存信息怎么看？

   性能测试最基本要考虑以下几点：

   1、时间特性，主要指的是软件产品的事物响应时间（用户发出请求到收到应答的这段时间）

   2、资源利用率，包括：cpu、内存、网络、硬盘、虚拟内存（如Java虚拟机）

   3、服务器可靠性，指服务器能在相对高负载情况下持续的运行

   4、可配置优化性，指服务器配置优化、业务逻辑优化、代码优化等

   从外部看，性能测试主要关注如下三个指标

   - 吞吐量：每秒钟系统能够处理的请求数、任务数。

   - 响应时间：服务处理一个请求或一个任务的耗时。

   - 错误率：一批请求中结果出错的请求所占比例。

     free 命令显示系统使用和空闲的内存情况，包括物理内存、交互区内存(swap)和内核缓冲区内存

     top 命令查看系统的实时负载， 包括进程、CPU负载、内存使用等等；

     zabbix Prometheus Grafana监控工具和可视化平台

5. Q：linux查看文件名字包含”高德“的命令？

   `find . -name 'string'`#查找当前目录下文件名包含字符串string的文件

    find . ! -name 'string' #文件名中不包含字符串string的文件

   `find . | xargs grep string`#查找当前目录下文件内容包含字符串string的文件

6. Q：vim 定位到最后一行？第100行？

   :set  nu     //显示行号 

   :set nonu    //取消显示行号 

   n+        //向下跳n行 

   n-         //向上跳n行 

   nG        //跳到行号为n的行 

   G           //跳至文件的底部 

   g         //跳转到文件头部

   /keyword     //向光标下搜索keyword字符串，keyword可以是正则表达式 

   ?keyword     //向光标上搜索keyword字符串 

   n           //向下搜索前一个搜素动作 

   N         //向上搜索前一个搜索动作

7. 算法题：

   判断str是否回文字符串？

   判断str中是否包含回文字符串？

   N*N数组，求出2x2正方形区间的最大值？

